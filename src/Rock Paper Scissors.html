<script>
/*
Copyright 2014-2017 Hermann Krumrey <hermann@krumreyh.com>

This file is part of javascript-experiments.

javascript-experiments is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

javascript-experiments is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with javascript-experiments.  If not, see <http://www.gnu.org/licenses/>.
*/
var cont = true;
while(cont){
var check = true;
while(check){
var userChoice = prompt("Do you choose ROCK, PAPER or SCISSORS?").toUpperCase();
if(userChoice==="ROCK"||userChoice==="PAPER"||userChoice==="SCISSORS"){
	check = false;
	}
else{
	confirm("There was an error in your input. Please enter ROCK, PAPER or SCISSORS.");
	}
}
var computerChoice = Math.random();
if (computerChoice < 0.34) {
	computerChoice = "ROCK";
} 
else if(computerChoice <= 0.67) {
	computerChoice = "PAPER";
} 
    else {
	computerChoice = "SCISSORS";
} 

console.log("Computer: " + computerChoice);

var calc = function (choice1,choice2){
    if(choice1===choice2){
        return "tie";}
    else{if(choice1==="ROCK"){
            if(choice2==="SCISSORS"){
                return "win";
            }
            else{
                return "LOSE";
            }}
        else{if(choice1==="PAPER"){
                if(choice2==="ROCK"){
                    return "win";
                }
                else{
                    return "lose";
                }}
            else{if(choice1==="SCISSORS"){
                    if(choice2==="ROCK"){
                        return"lose";
                    }
                    else{
                        return"win";
                    }}
            }}}};		
if(calc(userChoice,computerChoice)==="win"){
	confirm("You picked"+" "+userChoice+".The computer chose"+" "+computerChoice+". You won!");
}
else{if(calc(userChoice,computerChoice)==="lose"){
		confirm("You picked"+" "+userChoice+".The computer chose"+" "+computerChoice+". You lost...");
	}
	else{
		confirm("You picked"+" "+userChoice+".The computer chose"+" "+computerChoice+". It's a draw!");
	}}
var check2 = true;
while(check2){
var contq = prompt("Do you want to play again?").toUpperCase();
if (contq==="YES"){
	cont = true;
	check2 = false;
	}
else if(contq==="NO"){
	cont = false;
	check2 = false;
	confirm("Thank you for playing!");
	}
	else{
	confirm("I did not understand this. Could you please repeat if you want to continue playing?");
	}
}}
</script>